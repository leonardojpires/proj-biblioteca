doctype html
html(lang="pt-br")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title Biblioteca | #{title}
    link(rel="stylesheet", href="/public/css/styles.css")
    link(
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css",
      rel="stylesheet",
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT",
      crossorigin="anonymous"
    )
  body
    .d-flex.flex-column.min-vh-100
      header.bg-dark.text-white.py-4
        .container
          h1.mb-0 Biblioteca Virtual
          nav.mt-2
            ul.nav
              li.nav-item
                a.nav-link.text-white(href="/") Início
              li.nav-item
                a.nav-link.text-white(href="/livros/novo") Adicionar Livro

      main.container.flex-grow-1
        block content

      footer.bg-light.text-center.py-3.mt-5
        p.mb-0 © 2025 Biblioteca Virtual

    // JavaScript para excluir livro via API
    script.
      async function apagarLivro(id) {
        if (confirm("Tens a certeza que queres apagar este livro?")) {
          try {
            const response = await fetch(`/api/livros/${id}`, {
              method: 'DELETE',
              headers: {
                'Content-Type': 'application/json'
              }
            });

            if (response.ok) {
              alert("Livro apagado com sucesso.");
              location.reload();
            } else {
              const erro = await response.json();
              alert("Erro ao apagar o livro: " + (erro.error || response.statusText));
            }
          } catch (err) {
            alert("Erro ao comunicar com o servidor.");
            console.error(err);
          }
        }
      }
